<!-- Replace loading indicator content with actual response -->
<div id="loading-{{ message_id }}" class="flex items-start gap-2 sm:gap-3" hx-swap-oob="outerHTML">
    {% if is_error %}
    <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-red-500 flex items-center justify-center text-white text-xs sm:text-sm font-bold flex-shrink-0">
        !
    </div>
    <div class="flex-1 min-w-0">
        <div class="text-xs text-red-500 mb-1">Error</div>
        <div class="bg-red-50 border-2 border-red-300 rounded-xl sm:rounded-2xl rounded-tl-none px-3 sm:px-4 py-2 sm:py-3 max-w-full sm:max-w-3xl">
            <div class="text-red-700 font-medium markdown-raw">{{ response }}</div>
        </div>
    </div>
    {% else %}
    <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs sm:text-sm font-bold flex-shrink-0">
        W
    </div>
    <div class="flex-1 min-w-0">
        <div class="text-xs text-gray-500 mb-1">Workflow Assistant</div>
        <div class="bg-gray-100 rounded-xl sm:rounded-2xl rounded-tl-none px-3 sm:px-4 py-2 sm:py-3 max-w-full sm:max-w-3xl">
            <div class="markdown-raw">{{ response }}</div>
        </div>
    </div>
    {% endif %}
</div>